<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VP Peter House, Sunny Beach - Apartment Rental</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- EmailJS SDK -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Montserrat:wght@300;400;500;600&display=swap');
        
        :root {
            --primary-color: #1a1a1a;
            --accent-color: #c19a6b;
            --light-bg: #f8f5f0;
            --dark-text: #2c2c2c;
            --light-text: #f8f8f8;
            --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }
        
        body {
            font-family: 'Montserrat', sans-serif;
            background-color: #f8f9fa;
            color: var(--dark-text);
            line-height: 1.7;
            overflow-x: hidden;
        }
        
        h1, h2, h3, h4, .section-title {
            font-family: 'Playfair Display', serif;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .section-title {
            font-size: 2.5rem;
            color: var(--dark-text);
            margin-bottom: 2rem;
            text-align: center;
            position: relative;
            padding-bottom: 1rem;
        }
        
        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background-color: var(--accent-color);
            border-radius: 2px;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--dark-text);
        }

        .form-helper {
            display: block;
            margin-top: 0.25rem;
            font-size: 0.875rem;
            color: #6b7280;
        }

        /* Form Inputs */
        input[type="text"],
        input[type="email"],
        input[type="tel"],
        input[type="date"],
        textarea,
        select {
            width: 100%;
            padding: 12px 16px;
            margin: 8px 0;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
            background-color: #fff;
        }

        input[type="text"]:focus,
        input[type="email"]:focus,
        input[type="tel"]:focus,
        input[type="date"]:focus,
        textarea:focus,
        select:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(193, 154, 107, 0.2);
        }

        /* Buttons */
        .btn-primary {
            background-color: var(--accent-color);
            color: white;
        }

        .btn-secondary {
            background-color: #4b5563;
            color: white;
        }

        .btn-outline {
            background-color: transparent;
            border: 2px solid var(--accent-color);
            color: var(--accent-color);
        }

        button, .btn {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: all 0.3s ease;
            display: inline-block;
            text-align: center;
        }

        button:hover, .btn:hover {
            background-color: #b0885e;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        button:disabled, .btn:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* Alert Messages */
        .alert {
            padding: 1rem;
            border-radius: 0.375rem;
            margin-bottom: 1.5rem;
        }

        .alert-success {
            background-color: #ecfdf5;
            color: #065f46;
            border-left: 4px solid #10b981;
        }

        .alert-error {
            background-color: #fef2f2;
            color: #b91c1c;
            border-left: 4px solid #ef4444;
        }

        .alert-info {
            background-color: #eff6ff;
            color: #1e40af;
            border-left: 4px solid #3b82f6;
        }

        /* Cards and Containers */
        .card {
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            padding: 24px;
            margin-bottom: 24px;
        }

        /* Calendar */
        .calendar {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }

        .calendar-header {
            background-color: var(--accent-color);
            color: white;
            padding: 15px;
            text-align: center;
            font-weight: 600;
        }

        .calendar-day {
            padding: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid #f0f0f0;
        }

        .calendar-day:hover:not(.booked):not(.disabled) {
            background-color: #f8f5f0;
            transform: scale(1.05);
        }

        .calendar-day.selected {
            background-color: var(--accent-color);
            color: white;
            font-weight: 600;
        }

        .calendar-day.booked {
            background-color: #ffebee;
            color: #c62828;
            cursor: not-allowed;
            text-decoration: line-through;
        }

        .calendar-day.disabled {
            background-color: #f9f9f9;
            color: #ccc;
            cursor: not-allowed;
        }
        .calendar-day.selected {
            background-color: #2563eb; 
            color: white;
            transform: scale(1.05);
            border-radius: 0.375rem; 
        }
        .calendar-day.booked {
            background-color: #f87171; 
            color: #fef2f2; 
            cursor: not-allowed;
            text-decoration: line-through;
            opacity: 0.7;
        }
        .calendar-day.disabled {
            color: #9ca3af; 
            cursor: not-allowed;
        }
        .calendar-day.today {
            border: 2px solid #1d4ed8; 
            font-weight: bold;
        }
        
        .modal {
            display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%;
            overflow: auto; background-color: rgba(0,0,0,0.5);
        }
        .modal-content {
            background-color: #ffffff; margin: 10% auto; padding: 24px; border: 1px solid #e5e7eb;
            width: 90%; max-width: 550px; 
            border-radius: 0.5rem; text-align: center; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05);
        }
        .modal-close-button {
            background-color: #2563eb; color: white; padding: 10px 18px; border-radius: 0.375rem;
            cursor: pointer; margin-top: 20px; font-weight: 500; transition: background-color 0.3s ease;
        }
        .modal-close-button:hover { background-color: #1d4ed8; }
        .contact-info-modal {
            margin-top: 16px; padding-top: 16px; border-top: 1px solid #e5e7eb; text-align: left;
        }
        .contact-info-modal p { margin-bottom: 4px; color: #4b5563; }
        .contact-info-modal strong { color: #1f2937; }

        /* Feature Icons */
        .feature-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.5rem 0;
            color: #4b5563;
            font-size: 0.95rem;
        }

        .feature-icon {
            width: 1.25rem;
            height: 1.25rem;
            color: var(--accent-color);
            flex-shrink: 0;
        }

        /* Lightbox Styles */
        .lightbox {
            display: none;
            position: fixed;
            z-index: 9999;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(5px);
        }

        .lightbox.active {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .lightbox-content {
            position: relative;
            max-width: 90vw;
            max-height: 90vh;
            margin: auto;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .lightbox-image {
            max-width: 100%;
            max-height: 100%;
            width: auto;
            height: auto;
            object-fit: contain;
            border-radius: 8px;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
        }

        .lightbox-close-button {
            position: absolute;
            top: 20px;
            right: 40px;
            font-size: 2.5rem;
            font-weight: bold;
            color: rgba(255, 255, 255, 0.8);
            cursor: pointer;
            transition: color 0.3s ease;
            background: none;
            border: none;
            padding: 0;
            line-height: 1;
        }
        .lightbox-close-button:hover { color: #e5e7eb; }
        .lightbox-nav {
            position: absolute; top: 50%; transform: translateY(-50%);
            font-size: 3rem; font-weight: bold; color: rgba(255,255,255,0.7);
            cursor: pointer; transition: color 0.3s ease;
            background-color: rgba(0,0,0,0.3);
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            user-select: none; 
        }
        .lightbox-nav:hover { color: #fff; background-color: rgba(0,0,0,0.5); }
        .lightbox-prev { left: 20px; }
        .lightbox-next { right: 20px; }
        .lightbox-nav.disabled {
            color: rgba(255,255,255,0.2);
            cursor: default;
            background-color: rgba(0,0,0,0.1);
        }

        .gallery-image {
            width: 100%;
            height: 280px;
            object-fit: cover;
            border-radius: 8px;
            transition: var(--transition);
            cursor: pointer;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        .gallery-image::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.4);
            opacity: 0;
            transition: var(--transition);
            z-index: 1;
        }
        .gallery-image:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }
        .gallery-image:hover::before {
            opacity: 1;
        }
        .page-view { display: none; }
        .page-view.active { display: block; }

        .hero-section {
            position: relative;
            width: 100%;
            height: 100vh;
            min-height: 700px;
            max-height: none;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            background: linear-gradient(45deg, rgba(0,0,0,0.6) 0%, rgba(0,0,0,0.4) 50%, rgba(0,0,0,0.3) 100%), url('https://i.imgur.com/VijHLKA.jpeg') center center/cover no-repeat;
            background-attachment: fixed;
        }
        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(0,0,0,0.5) 0%, rgba(0,0,0,0.3) 50%, rgba(0,0,0,0.2) 100%);
            z-index: 1;
        }
        .hero-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center center;
            z-index: 0;
            transition: transform 10s ease;
        }
        .hero-section:hover .hero-image {
            transform: scale(1.02);
        }
        .hero-content-overlay {
            position: relative;
            max-width: 1200px;
            width: 90%;
            margin: 0 auto;
            padding: 40px 20px;
            z-index: 2;
        }
        .hero-title {
            font-size: clamp(2.5rem, 5vw, 4.5rem);
            font-weight: 700;
            color: white;
            margin: 0 0 1.5rem 0;
            line-height: 1.2;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 0.8s ease forwards;
        }
        .hero-subtitle {
            font-size: 1.5rem;
            color: rgba(255,255,255,0.9);
            margin-bottom: 3rem;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            text-shadow: 1px 1px 4px rgba(0,0,0,0.3);
            font-weight: 300;
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 0.8s ease 0.2s forwards;
        }
        .hero-button {
            background-color: var(--accent-color);
            color: white;
            font-weight: 500;
            padding: 1.2rem 3rem;
            border-radius: 50px;
            transition: var(--transition);
            font-size: 1.1rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            border: none;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            z-index: 1;
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 0.8s ease 0.4s forwards;
            box-shadow: 0 10px 30px rgba(193, 154, 107, 0.3);
        }
        .hero-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 100%;
            background-color: rgba(255,255,255,0.1);
            transition: all 0.5s ease;
            z-index: -1;
        }
        .hero-button:hover::before {
            width: 100%;
        }
        .hero-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(193, 154, 107, 0.4);
        }

        .about-section {
            background-color: #ffffff;
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .hero-section {
                min-height: 80vh;
                background-attachment: scroll;
            }
            .hero-content-overlay {
                padding: 20px 15px;
            }
            .hero-title {
                font-size: 3rem;
            }
            .hero-subtitle {
                font-size: 1.2rem;
                margin-bottom: 2rem;
            }
            .section-title {
                font-size: 2rem;
            }
            .lightbox-content {
                max-width: 95vw;
                max-height: 85vh;
                padding: 10px;
            }
            .lightbox-nav {
                font-size: 2rem;
                padding: 0.3rem 0.8rem;
            }
            .lightbox-prev { left: 10px; }
            .lightbox-next { right: 10px; }
            .lightbox-close-button {
                top: 10px;
                right: 20px;
                font-size: 2rem;
            }
        }
        
        @media (max-width: 480px) {
            .hero-section {
                min-height: 70vh;
            }
            .hero-content-overlay {
                padding: 15px 10px;
            }
            .hero-title {
                font-size: 2.5rem;
                margin-bottom: 1rem;
            }
            .hero-subtitle {
                font-size: 1.1rem;
                margin-bottom: 1.5rem;
            }
            .hero-button {
                padding: 1rem 2rem;
                font-size: 1rem;
                letter-spacing: 1px;
            }
        }

        @media (min-width: 1400px) {
            .hero-section {
                min-height: 100vh;
            }
            .hero-content-overlay {
                padding: 60px 20px;
            }
        }
    </style>
</head>
<body class="antialiased">
    <!-- Full-screen Hero Section -->
    <div id="apartmentView" class="page-view active">
        <div class="hero-section shadow-2xl"> 
            <div class="hero-content-overlay">
                <h1 id="apartmentNameHeader" class="hero-title">VP Peter House, Sunny Beach</h1>
                <p class="hero-subtitle">Your beachfront aparthotel experience with stunning city views!</p>
                <button onclick="showBookingView()" class="hero-button">
                    Book Your Stay Now
                </button>
            </div>
        </div>
        
        <!-- Content Container -->
        <div class="container mx-auto px-4 py-8 max-w-6xl">
            <div class="py-12 px-4 sm:px-6 lg:px-8"> 
                <div class="about-section p-6 md:p-10 rounded-xl shadow-xl mb-12">
                    <h2 class="section-title">About the Aparthotel</h2>
                    <div class="grid md:grid-cols-5 gap-8 mt-6">
                        <div class="md:col-span-3">
                            <h3 class="text-xl font-semibold text-gray-700 mb-3">Welcome to Your Perfect Getaway</h3>
                            <ul id="apartmentDescription" class="text-gray-600 leading-relaxed space-y-3" style="list-style: none; padding-left: 0;">
                                <li class="flex items-start gap-3">
                                    <span class="text-green-500 font-bold text-lg mt-1">•</span>
                                    <span>Enjoy a memorable stay at VP Peter House, a spacious aparthotel offering stunning city views from its terrace.</span>
                                </li>
                                <li class="flex items-start gap-3">
                                    <span class="text-green-500 font-bold text-lg mt-1">•</span>
                                    <span>This beachfront property in Sunny Beach provides easy access to the shore, along with a seasonal outdoor swimming pool and air conditioning for your comfort.</span>
                                </li>
                                <li class="flex items-start gap-3">
                                    <span class="text-green-500 font-bold text-lg mt-1">•</span>
                                    <span>The apartment features one bedroom, a living room, a flat-screen TV, and a fully equipped kitchen with a microwave and fridge.</span>
                                </li>
                                <li class="flex items-start gap-3">
                                    <span class="text-green-500 font-bold text-lg mt-1">•</span>
                                    <span>Benefit from free private parking, a 24-hour front desk, and a lift.</span>
                                </li>
                                <li class="flex items-start gap-3">
                                    <span class="text-green-500 font-bold text-lg mt-1">•</span>
                                    <span>Families will appreciate the indoor play area, outdoor play equipment, and baby safety gate.</span>
                                </li>
                                <li class="flex items-start gap-3">
                                    <span class="text-green-500 font-bold text-lg mt-1">•</span>
                                    <span>A café and mini-market are also conveniently located on-site.</span>
                                </li>
                                <li class="flex items-start gap-3">
                                    <span class="text-green-500 font-bold text-lg mt-1">•</span>
                                    <span>Explore nearby attractions like Action Aquapark (1.3 km) or take a day trip to the Aviation Museum (28 km).</span>
                                </li>
                                <li class="flex items-start gap-3">
                                    <span class="text-green-500 font-bold text-lg mt-1">•</span>
                                    <span>Burgas Airport is 30 km away.</span>
                                </li>
                            </ul>
                            <div class="mt-6">
                                <button onclick="showBookingView()" class="btn btn-primary px-8 py-3 text-lg font-semibold rounded-lg shadow-lg hover:shadow-xl transition-all duration-300">
                                    Book Your Stay Now
                                </button>
                            </div>
                        </div>
                        <div class="md:col-span-2">
                            <h3 class="text-xl font-semibold text-gray-700 mb-3">Key Features & Amenities:</h3>
                            <ul id="apartmentFeatures" class="space-y-2.5"> 
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2 class="section-title">Photo Gallery</h2>
                    <div id="photoGalleryGrid" class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-6">
                        <img src="new_public/images/apartment-view-2.jpeg" alt="Bedroom View - Main Bed" class="gallery-image" onerror="this.onerror=null;this.src='https://placehold.co/300x200/cccccc/ffffff?text=Bedroom+Image';">
                        <img src="new_public/images/apartment-main.jpg" alt="VP Peter House Apartment" class="gallery-image" onerror="this.onerror=null;this.src='https://placehold.co/300x200/cccccc/ffffff?text=Gallery+Image';">
                        <img src="new_public/images/apartment-view-3.jpeg" alt="Apartment View 2" class="gallery-image" onerror="this.onerror=null;this.src='https://placehold.co/300x200/cccccc/ffffff?text=Gallery+Image';">
                        <img src="new_public/images/apartment-view-4.jpeg" alt="Apartment View 3" class="gallery-image" onerror="this.onerror=null;this.src='https://placehold.co/300x200/cccccc/ffffff?text=Gallery+Image';">
                        <img src="new_public/images/apartment-view-5.jpeg" alt="Apartment View 4" class="gallery-image" onerror="this.onerror=null;this.src='https://placehold.co/300x200/cccccc/ffffff?text=Gallery+Image';">
                        <img src="new_public/images/apartment-view-6.jpeg" alt="Apartment View 5" class="gallery-image" onerror="this.onerror=null;this.src='https://placehold.co/300x200/cccccc/ffffff?text=Gallery+Image';">
                        <img src="new_public/images/apartment-view-7.jpeg" alt="Apartment View 6" class="gallery-image" onerror="this.onerror=null;this.src='https://placehold.co/300x200/cccccc/ffffff?text=Gallery+Image';">
                        <img src="new_public/images/apartment-view-8.jpeg" alt="Bedroom View 3" class="gallery-image" onerror="this.onerror=null;this.src='https://placehold.co/300x200/cccccc/ffffff?text=Bedroom+Image';">
                        <img src="new_public/images/apartment-view-9.jpeg" alt="Bedroom View 4" class="gallery-image" onerror="this.onerror=null;this.src='https://placehold.co/300x200/cccccc/ffffff?text=Bedroom+Image';">
                        <img src="new_public/images/apartment-view-10.jpeg" alt="Apartment View 7" class="gallery-image" onerror="this.onerror=null;this.src='https://placehold.co/300x200/cccccc/ffffff?text=Gallery+Image';">
                        <img src="new_public/images/apartment-view-11.jpeg" alt="Apartment View 8" class="gallery-image" onerror="this.onerror=null;this.src='https://placehold.co/300x200/cccccc/ffffff?text=Gallery+Image';">
                        <img src="new_public/images/apartment-view-12.jpeg" alt="Apartment View 9" class="gallery-image" onerror="this.onerror=null;this.src='https://placehold.co/300x200/cccccc/ffffff?text=Gallery+Image';">
                        <img src="new_public/images/apartment-view-13.jpeg" alt="Apartment View 10" class="gallery-image" onerror="this.onerror=null;this.src='https://placehold.co/300x200/cccccc/ffffff?text=Gallery+Image';">
                        <img src="new_public/images/apartment-view-14.jpeg" alt="Bedroom View 7" class="gallery-image" onerror="this.onerror=null;this.src='https://placehold.co/300x200/cccccc/ffffff?text=Bedroom+Image';">
                        <img src="new_public/images/apartment-view-15.jpeg" alt="Apartment View 11" class="gallery-image" onerror="this.onerror=null;this.src='https://placehold.co/300x200/cccccc/ffffff?text=Gallery+Image';">
                        <img src="new_public/images/apartment-view-16.jpeg" alt="Apartment View 12" class="gallery-image" onerror="this.onerror=null;this.src='https://placehold.co/300x200/cccccc/ffffff?text=Gallery+Image';">
                    </div>
                </div>
                
                <div class="mt-8 p-4 bg-blue-50 border border-blue-200 rounded-lg text-center">
                    <p class="text-sm text-blue-700">Demo Mode - Booking system ready for integration</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Booking View -->
    <div id="bookingView" class="page-view">
        <div class="container mx-auto px-4 py-8 max-w-4xl">
            <button id="backToDetailsBtn" class="bg-amber-600 hover:bg-amber-700 text-white px-6 py-3 rounded-lg font-medium transition-colors duration-300 mb-8 flex items-center gap-2">
                ← BACK TO APARTMENT DETAILS
            </button>
            
            <!-- Header Section -->
            <div class="text-center mb-8">
                <h1 class="text-4xl font-bold text-gray-800 mb-4">Book Your Stay</h1>
                <p class="text-gray-600 text-lg mb-2">Select your dates and provide your details to request a booking.</p>
                <p class="text-2xl font-semibold text-blue-600">Price: 130 EUR per night</p>
            </div>

            <!-- Calendar Section -->
            <div class="bg-white rounded-xl shadow-lg p-8 mb-8">
                <h2 class="text-2xl font-bold text-gray-700 text-center mb-6">Choose Your Check-in & Check-out Dates</h2>
                
                <!-- Calendar Header -->
                <div class="flex items-center justify-between mb-6">
                    <button id="prevMonth" class="bg-gray-100 hover:bg-gray-200 p-2 rounded-lg transition-colors">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                        </svg>
                    </button>
                    <h3 id="currentMonth" class="text-xl font-semibold text-gray-700">May 2025</h3>
                    <button id="nextMonth" class="bg-gray-100 hover:bg-gray-200 p-2 rounded-lg transition-colors">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                        </svg>
                    </button>
                </div>

                <!-- Calendar Grid -->
                <div class="grid grid-cols-7 gap-1 mb-4">
                    <div class="text-center text-sm font-medium text-gray-500 py-2">Sun</div>
                    <div class="text-center text-sm font-medium text-gray-500 py-2">Mon</div>
                    <div class="text-center text-sm font-medium text-gray-500 py-2">Tue</div>
                    <div class="text-center text-sm font-medium text-gray-500 py-2">Wed</div>
                    <div class="text-center text-sm font-medium text-gray-500 py-2">Thu</div>
                    <div class="text-center text-sm font-medium text-gray-500 py-2">Fri</div>
                    <div class="text-center text-sm font-medium text-gray-500 py-2">Sat</div>
                </div>
                
                <div id="calendarGrid" class="grid grid-cols-7 gap-1">
                    <!-- Calendar days will be populated by JavaScript -->
                </div>

                <!-- Date Selection Info -->
                <div class="mt-6 p-4 bg-gray-50 rounded-lg">
                    <h4 class="text-lg font-semibold text-gray-700 mb-2">Your Information</h4>
                    <div class="grid grid-cols-2 gap-4 text-sm">
                        <div>
                            <span class="text-gray-600">Selected Start Date:</span>
                            <span id="selectedStartDate" class="font-medium text-blue-600">Not selected</span>
                        </div>
                        <div>
                            <span class="text-gray-600">Selected End Date:</span>
                            <span id="selectedEndDate" class="font-medium text-blue-600">Not selected</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Booking Form -->
            <div class="bg-white rounded-xl shadow-lg p-8">
                <div class="grid md:grid-cols-3 gap-6 mb-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Full Name</label>
                        <input type="text" id="fullNameInput" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors" placeholder="Enter your full name">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Email Address</label>
                        <input type="email" id="emailInput" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors" placeholder="Enter your email">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Phone Number</label>
                        <input type="tel" id="phoneInput" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors" placeholder="Enter your phone number">
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="flex flex-col sm:flex-row gap-4">
                    <button id="requestBookingBtn" class="flex-1 bg-blue-500 hover:bg-blue-600 text-white py-3 px-6 rounded-lg font-medium transition-colors duration-300">
                        Request to Book
                    </button>
                    <button id="clearSelectionBtn" class="flex-1 bg-gray-500 hover:bg-gray-600 text-white py-3 px-6 rounded-lg font-medium transition-colors duration-300">
                        Clear Selection
                    </button>
                </div>

                <!-- Total Price Display -->
                <div id="priceDisplay" class="hidden mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200">
                    <div class="flex justify-between items-center">
                        <div>
                            <p class="text-lg font-semibold text-gray-700">Total for your stay:</p>
                            <p class="text-sm text-gray-500">Includes all taxes and fees</p>
                        </div>
                        <p id="totalAmount" class="text-2xl font-bold text-blue-600">€0.00</p>
                    </div>
                </div>
            </div>

            <!-- Cancellation Policy -->
            <div class="bg-white rounded-xl shadow-lg p-8 mt-8">
                <h3 class="text-xl font-semibold text-gray-700 mb-4">Cancellation Policy</h3>
                <p class="text-gray-600 mb-4">Free cancellation up to 14 days before check-in. A 50% refund (minus service fees) is available if cancelled at least 7 days before check-in. No refund for cancellations made within 7 days of check-in.</p>
                <p class="text-sm text-gray-500">By completing this booking, you agree to our Terms of Service and Privacy Policy.</p>
            </div>
        </div>
    </div>

    <!-- Lightbox Modal -->
    <div id="lightboxModal" class="lightbox">
        <span id="lightboxClose" class="lightbox-close-button">&times;</span>
        <div class="lightbox-content">
            <img id="lightboxImg" class="lightbox-image" src="" alt="Gallery Image">
        </div>
        <span id="lightboxPrev" class="lightbox-nav lightbox-prev">&#10094;</span>
        <span id="lightboxNext" class="lightbox-nav lightbox-next">&#10095;</span>
    </div>

    <!-- Success Modal -->
    <div id="messageModal" class="modal">
        <div class="modal-content">
            <h2 class="text-xl font-semibold mb-4">Booking Confirmation</h2>
            <p id="modalMessageText">Your booking request has been received!</p>
            <div id="ownerContactInfo" class="contact-info-modal" style="display: none;">
                <p><strong>Property Owner Contact:</strong></p>
                <p><strong>Name:</strong> Nikolai (VP Peter House Management)</p>
                <p><strong>Email:</strong> tonevnikolai13@gmail.com</p>
                <p><strong>Phone:</strong> +353 858 103 131 (Ireland)</p>
                <p><strong>Phone:</strong> +359 887 658 222 (Bulgaria)</p>
                <p><strong>Property:</strong> VP Peter House, Sunny Beach, Bulgaria</p>
            </div>
            <button id="modalCloseBtn" class="modal-close-button">Close</button>
        </div>
    </div>

    <script>
        // EmailJS initialization for PRODUCTION
        (function() {
            emailjs.init("rZNuOMQRmruDxRd3S"); // Updated EmailJS public key
        })();

        // Production EmailJS service configuration
        const EMAILJS_CONFIG = {
            serviceID: 'service_9cf2eh2', // Updated EmailJS service ID
            templateID: 'template_rv33izg', // Updated EmailJS template ID
            publicKey: 'rZNuOMQRmruDxRd3S' // Updated EmailJS public key
        };

        // Feature icons and data
        const featureIcons = {
            "1 Bedroom": `<svg class="feature-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2 2z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 21v-4a2 2 0 012-2h4a2 2 0 012 2v4"/></svg>`,
            "Living Room": `<svg class="feature-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2 2z"/></svg>`,
            "Flat-screen TV": `<svg class="feature-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>`,
            "Equipped Kitchen": `<svg class="feature-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/></svg>`,
            "1 Bathroom with Bath": `<svg class="feature-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 14v3a2 2 0 002 2h4a2 2 0 002-2v-3"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 14V7a2 2 0 012-2h4a2 2 0 012 2v7"/></svg>`,
            "Terrace with City Views": `<svg class="feature-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/></svg>`,
            "Air Conditioning": `<svg class="feature-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM7 3V1m0 20v-2m8-10a4 4 0 014 4v4a2 2 0 01-2 2h-4a2 2 0 01-2-2v-4a4 4 0 014-4z"/></svg>`,
            "Balcony": `<svg class="feature-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 21h18M4 18h16M6 18v-3M10 18v-3M14 18v-3M18 18v-3M12 3l8 5v10H4V8l8-5z"/></svg>`,
            "Free Private Parking": `<svg class="feature-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"/></svg>`,
            "Seasonal Outdoor Pool": `<svg class="feature-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"/></svg>`,
            "Family Rooms": `<svg class="feature-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/></svg>`,
            "Beachfront Location": `<svg class="feature-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/></svg>`,
            "24-hour Reception": `<svg class="feature-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>`,
            "Elevator": `<svg class="feature-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 11l5-5m0 0l5 5m-5-5v12"/></svg>`
        };

        // Initialize features
        function populateFeatures() {
            const apartmentFeaturesEl = document.getElementById('apartmentFeatures');
            if (!apartmentFeaturesEl) return;
            
            apartmentFeaturesEl.innerHTML = '';
            const coreFeatures = [
                "1 Bedroom", "Living Room", "Flat-screen TV", "Equipped Kitchen",
                "1 Bathroom with Bath", "Terrace with City Views", "Air Conditioning", "Balcony",
                "Free Private Parking", "Seasonal Outdoor Pool", "Family Rooms", "Beachfront Location",
                "24-hour Reception", "Elevator"
            ];
            
            coreFeatures.forEach(featureText => {
                const li = document.createElement('li');
                li.classList.add('feature-item');
                const iconHTML = featureIcons[featureText] || `<svg class="feature-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>`;
                li.innerHTML = `${iconHTML}<span>${featureText}</span>`;
                apartmentFeaturesEl.appendChild(li);
            });
        }

        // Lightbox functionality
        let galleryImageSources = [];
        let currentLightboxIndex = 0;

        function openLightbox(clickedImgSrc) {
            const photoGalleryGrid = document.getElementById('photoGalleryGrid');
            if (galleryImageSources.length === 0 && photoGalleryGrid) {
                galleryImageSources = Array.from(photoGalleryGrid.querySelectorAll('.gallery-image')).map(img => img.src);
            }
            if (!galleryImageSources.length) return;

            currentLightboxIndex = galleryImageSources.indexOf(clickedImgSrc);
            if (currentLightboxIndex === -1) currentLightboxIndex = 0;
            
            const lightboxImg = document.getElementById('lightboxImg');
            const lightboxModal = document.getElementById('lightboxModal');
            lightboxImg.src = galleryImageSources[currentLightboxIndex];
            lightboxModal.classList.add('active');
            document.body.style.overflow = 'hidden';
            updateLightboxNav();
        }

        function closeLightbox() {
            const lightboxModal = document.getElementById('lightboxModal');
            lightboxModal.classList.remove('active');
            document.body.style.overflow = '';
        }

        function updateLightboxNav() {
            const lightboxPrevBtn = document.getElementById('lightboxPrev');
            const lightboxNextBtn = document.getElementById('lightboxNext');
            if (!galleryImageSources.length) return;
            lightboxPrevBtn.classList.toggle('disabled', currentLightboxIndex === 0);
            lightboxNextBtn.classList.toggle('disabled', currentLightboxIndex === galleryImageSources.length - 1);
        }

        function showPrevImage() {
            if (currentLightboxIndex > 0) {
                currentLightboxIndex--;
                const lightboxImg = document.getElementById('lightboxImg');
                lightboxImg.src = galleryImageSources[currentLightboxIndex];
                updateLightboxNav();
            }
        }

        function showNextImage() {
            if (currentLightboxIndex < galleryImageSources.length - 1) {
                currentLightboxIndex++;
                const lightboxImg = document.getElementById('lightboxImg');
                lightboxImg.src = galleryImageSources[currentLightboxIndex];
                updateLightboxNav();
            }
        }

        // View switching
        function showApartmentView() {
            document.getElementById('apartmentView').classList.add('active');
            document.getElementById('bookingView').classList.remove('active');
            window.scrollTo(0, 0);
        }

        function showBookingView() {
            document.getElementById('apartmentView').classList.remove('active');
            document.getElementById('bookingView').classList.add('active');
            window.scrollTo(0, 0);
            initializeCalendar();
        }

        // Booking functionality
        let currentDate = new Date();
        let selectedStartDate = null;
        let selectedEndDate = null;
        let isSelectingEndDate = false;

        function initializeCalendar() {
            updateCalendarDisplay();
            setupCalendarEventListeners();
        }

        function updateCalendarDisplay() {
            const currentMonthEl = document.getElementById('currentMonth');
            const calendarGrid = document.getElementById('calendarGrid');
            
            const months = ['January', 'February', 'March', 'April', 'May', 'June',
                          'July', 'August', 'September', 'October', 'November', 'December'];
            
            currentMonthEl.textContent = `${months[currentDate.getMonth()]} ${currentDate.getFullYear()}`;
            
            // Clear calendar
            calendarGrid.innerHTML = '';
            
            // Get first day of month and number of days
            const firstDay = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1);
            const lastDay = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0);
            const startDate = new Date(firstDay);
            startDate.setDate(startDate.getDate() - firstDay.getDay()); // Start from Sunday
            
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            // Generate calendar days
            for (let i = 0; i < 42; i++) { // 6 weeks
                const cellDate = new Date(startDate);
                cellDate.setDate(startDate.getDate() + i);
                
                const dayEl = document.createElement('div');
                dayEl.className = 'calendar-day h-12 flex items-center justify-center cursor-pointer rounded-lg border transition-all duration-200 hover:bg-blue-50';
                dayEl.textContent = cellDate.getDate();
                dayEl.dataset.date = cellDate.toISOString().split('T')[0];
                
                // Style different types of days
                if (cellDate.getMonth() !== currentDate.getMonth()) {
                    dayEl.className += ' text-gray-400 cursor-not-allowed bg-gray-50';
                } else if (cellDate < today) {
                    dayEl.className += ' text-gray-400 cursor-not-allowed bg-gray-100';
                } else {
                    dayEl.className += ' text-gray-700 hover:bg-blue-100 hover:text-blue-600';
                    
                    // Mark selected dates
                    if (selectedStartDate && cellDate.toISOString().split('T')[0] === selectedStartDate) {
                        dayEl.className += ' bg-blue-500 text-white font-bold hover:bg-blue-600';
                    } else if (selectedEndDate && cellDate.toISOString().split('T')[0] === selectedEndDate) {
                        dayEl.className += ' bg-blue-500 text-white font-bold hover:bg-blue-600';
                    } else if (selectedStartDate && selectedEndDate) {
                        const start = new Date(selectedStartDate);
                        const end = new Date(selectedEndDate);
                        if (cellDate > start && cellDate < end) {
                            dayEl.className += ' bg-blue-100 text-blue-600';
                        }
                    }
                    
                    dayEl.addEventListener('click', () => selectDate(cellDate.toISOString().split('T')[0]));
                }
                
                calendarGrid.appendChild(dayEl);
            }
        }

        function selectDate(dateStr) {
            if (!selectedStartDate || (selectedStartDate && selectedEndDate)) {
                // Start new selection
                selectedStartDate = dateStr;
                selectedEndDate = null;
                isSelectingEndDate = true;
            } else if (isSelectingEndDate) {
                // Select end date
                const startDate = new Date(selectedStartDate);
                const clickedDate = new Date(dateStr);
                
                if (clickedDate > startDate) {
                    selectedEndDate = dateStr;
                    isSelectingEndDate = false;
                } else {
                    // If clicked date is before start date, make it the new start date
                    selectedStartDate = dateStr;
                    selectedEndDate = null;
                }
            }
            
            updateCalendarDisplay();
            updateDateDisplay();
            calculatePrice();
        }

        function updateDateDisplay() {
            const startDateEl = document.getElementById('selectedStartDate');
            const endDateEl = document.getElementById('selectedEndDate');
            
            startDateEl.textContent = selectedStartDate ? formatDate(selectedStartDate) : 'Not selected';
            endDateEl.textContent = selectedEndDate ? formatDate(selectedEndDate) : 'Not selected';
        }

        function formatDate(dateStr) {
            const date = new Date(dateStr);
            return date.toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
        }

        function calculatePrice() {
            const priceDisplay = document.getElementById('priceDisplay');
            const totalAmount = document.getElementById('totalAmount');
            
            if (selectedStartDate && selectedEndDate) {
                const start = new Date(selectedStartDate);
                const end = new Date(selectedEndDate);
                const nights = Math.ceil((end - start) / (1000 * 60 * 60 * 24));
                const total = nights * 130; // €130 per night
                
                totalAmount.textContent = `€${total.toFixed(2)}`;
                priceDisplay.classList.remove('hidden');
            } else {
                priceDisplay.classList.add('hidden');
            }
        }

        function setupCalendarEventListeners() {
            const prevMonth = document.getElementById('prevMonth');
            const nextMonth = document.getElementById('nextMonth');
            const clearSelection = document.getElementById('clearSelectionBtn');
            const requestBooking = document.getElementById('requestBookingBtn');
            
            prevMonth.addEventListener('click', () => {
                currentDate.setMonth(currentDate.getMonth() - 1);
                updateCalendarDisplay();
            });
            
            nextMonth.addEventListener('click', () => {
                currentDate.setMonth(currentDate.getMonth() + 1);
                updateCalendarDisplay();
            });
            
            clearSelection.addEventListener('click', () => {
                selectedStartDate = null;
                selectedEndDate = null;
                isSelectingEndDate = false;
                updateCalendarDisplay();
                updateDateDisplay();
                calculatePrice();
                
                // Clear form fields
                document.getElementById('fullNameInput').value = '';
                document.getElementById('emailInput').value = '';
                document.getElementById('phoneInput').value = '';
            });
            
            requestBooking.addEventListener('click', handleBookingRequest);
        }

        function handleBookingRequest() {
            const fullName = document.getElementById('fullNameInput').value.trim();
            const email = document.getElementById('emailInput').value.trim();
            const phone = document.getElementById('phoneInput').value.trim();
            
            // Validation
            if (!selectedStartDate || !selectedEndDate) {
                alert('Please select both check-in and check-out dates.');
                return;
            }
            
            if (!fullName || !email || !phone) {
                alert('Please fill in all required fields (Name, Email, Phone).');
                return;
            }
            
            // Email validation
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                alert('Please enter a valid email address.');
                return;
            }
            
            // Calculate nights and total
            const nights = Math.ceil((new Date(selectedEndDate) - new Date(selectedStartDate)) / (1000 * 60 * 60 * 24));
            const totalAmount = nights * 130;
            
            // Create booking data
            const bookingData = {
                fullName,
                email,
                phone,
                checkIn: selectedStartDate,
                checkOut: selectedEndDate,
                nights: nights,
                totalAmount: `€${totalAmount.toFixed(2)}`,
                timestamp: new Date().toISOString()
            };
            
            console.log('Booking Request:', bookingData);
            
            // Send email notification to Nikolai
            sendBookingNotificationEmail(bookingData)
                .then((response) => {
                    if (response.success) {
                        // Show success modal
                        showModal('Your booking request has been sent! Nikolai will contact you within 24 hours to confirm your reservation and arrange payment.', true);
                    } else {
                        console.error('Email sending failed:', response.error);
                        // Still show success modal but with different message
                        showModal('Your booking request has been received! Please contact Nikolai directly using the details below to confirm your reservation.', true);
                    }
                })
                .catch((error) => {
                    console.error('Email sending failed:', error);
                    // Still show success modal but with different message
                    showModal('Your booking request has been received! Please contact Nikolai directly using the details below to confirm your reservation.', true);
                });
            
            // Reset form after successful submission
            setTimeout(() => {
                selectedStartDate = null;
                selectedEndDate = null;
                isSelectingEndDate = false;
                updateCalendarDisplay();
                updateDateDisplay();
                calculatePrice();
                
                document.getElementById('fullNameInput').value = '';
                document.getElementById('emailInput').value = '';
                document.getElementById('phoneInput').value = '';
            }, 1000);
        }

        async function sendBookingNotificationEmail(bookingData) {
            try {
                // Prepare email template parameters
                const templateParams = {
                    to_email: 'tonevnikolai13@gmail.com',
                    to_name: 'Nikolai',
                    property_name: 'VP Peter House',
                    guest_name: bookingData.fullName,
                    guest_email: bookingData.email,
                    guest_phone: bookingData.phone,
                    check_in_date: formatDate(bookingData.checkIn),
                    check_out_date: formatDate(bookingData.checkOut),
                    number_of_nights: bookingData.nights,
                    total_price: bookingData.totalAmount,
                    booking_details: `
🏨 NEW BOOKING REQUEST - VP Peter House 🏨

📋 BOOKING DETAILS:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔹 Property: VP Peter House, Sunny Beach
🔹 Check-in: ${formatDate(bookingData.checkIn)}
🔹 Check-out: ${formatDate(bookingData.checkOut)}  
🔹 Duration: ${bookingData.nights} nights
🔹 Total Price: €${bookingData.totalAmount}

👤 GUEST INFORMATION:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔹 Name: ${bookingData.fullName}
🔹 Email: ${bookingData.email}
🔹 Phone: ${bookingData.phone}

📞 NEXT STEPS:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Please contact the guest to confirm availability and arrange payment details.

This is an automated booking request from your VP Peter House website.
                    `
                };

                // Send email using EmailJS
                const response = await emailjs.send(
                    EMAILJS_CONFIG.serviceID,
                    EMAILJS_CONFIG.templateID,
                    templateParams,
                    EMAILJS_CONFIG.publicKey
                );

                console.log('✅ Email sent successfully:', response);
                return { success: true, response };

            } catch (error) {
                console.error('❌ Email sending failed:', error);
                
                // Fallback: Log the booking details for manual processing
                console.log('📧 BOOKING DETAILS FOR MANUAL PROCESSING:');
                console.log('To: tonevnikolai13@gmail.com');
                console.log('Subject: New Booking Request - VP Peter House');
                console.log(`
📨 NEW BOOKING REQUEST 📨

Property: VP Peter House, Sunny Beach

👤 GUEST DETAILS:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
• Name: ${bookingData.fullName}
• Email: ${bookingData.email}
• Phone: ${bookingData.phone}

📅 BOOKING DETAILS:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
• Check-in: ${formatDate(bookingData.checkIn)}
• Check-out: ${formatDate(bookingData.checkOut)}
• Number of nights: ${bookingData.nights}
• Total price: €${bookingData.totalAmount}

Please contact the guest to confirm availability and payment.
                `);
                
                return { success: false, error };
            }
        }

        function showAlert(message, type = 'info') {
            const alertDiv = document.getElementById('bookingAlert');
            alertDiv.className = `alert alert-${type}`;
            alertDiv.textContent = message;
            alertDiv.classList.remove('hidden');
            
            // Auto-hide after 5 seconds
            setTimeout(() => {
                alertDiv.classList.add('hidden');
            }, 5000);
        }

        function showModal(message, showOwnerInfo = false) {
            const modalMessageText = document.getElementById('modalMessageText');
            const ownerContactInfoModal = document.getElementById('ownerContactInfo');
            const messageModal = document.getElementById('messageModal');
            
            modalMessageText.textContent = message;
            if (showOwnerInfo) {
                ownerContactInfoModal.style.display = 'block';
            } else {
                ownerContactInfoModal.style.display = 'none';
            }
            messageModal.style.display = 'block';
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            populateFeatures();
            
            // Gallery event listeners
            const photoGalleryGrid = document.getElementById('photoGalleryGrid');
            if (photoGalleryGrid) {
                galleryImageSources = Array.from(photoGalleryGrid.querySelectorAll('.gallery-image')).map(img => img.src);
                photoGalleryGrid.addEventListener('click', function(e) {
                    if (e.target.classList.contains('gallery-image')) {
                        openLightbox(e.target.src);
                    }
                });
            }
            
            // Lightbox event listeners
            const lightboxCloseBtn = document.getElementById('lightboxClose');
            const lightboxPrevBtn = document.getElementById('lightboxPrev');
            const lightboxNextBtn = document.getElementById('lightboxNext');
            const lightboxModal = document.getElementById('lightboxModal');
            
            if (lightboxCloseBtn) lightboxCloseBtn.addEventListener('click', closeLightbox);
            if (lightboxPrevBtn) lightboxPrevBtn.addEventListener('click', showPrevImage);
            if (lightboxNextBtn) lightboxNextBtn.addEventListener('click', showNextImage);
            
            if (lightboxModal) {
                lightboxModal.addEventListener('click', (e) => {
                    if (e.target === lightboxModal) {
                        closeLightbox();
                    }
                });
            }
            
            // Keyboard navigation for lightbox
            document.addEventListener('keydown', (e) => {
                if (lightboxModal && lightboxModal.classList.contains('active')) {
                    if (e.key === "Escape") closeLightbox();
                    if (e.key === "ArrowLeft" && !lightboxPrevBtn.classList.contains('disabled')) showPrevImage();
                    if (e.key === "ArrowRight" && !lightboxNextBtn.classList.contains('disabled')) showNextImage();
                }
            });
            
            // Navigation event listeners
            const backToDetailsBtn = document.getElementById('backToDetailsBtn');
            if (backToDetailsBtn) {
                backToDetailsBtn.addEventListener('click', showApartmentView);
            }
            
            // Modal close event listeners
            const modalCloseBtn = document.getElementById('modalCloseBtn');
            const messageModal = document.getElementById('messageModal');
            
            if (modalCloseBtn) {
                modalCloseBtn.onclick = () => { messageModal.style.display = 'none'; };
            }
            
            window.onclick = (event) => { 
                if (event.target == messageModal) messageModal.style.display = 'none';
            };
        });
    </script>
</body>
</html>